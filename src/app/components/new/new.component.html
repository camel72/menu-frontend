<h1>Menu</h1>

<div class="row">
  <div class="col-12 col-md-12">
    <form [formGroup]="menuMultiStepForm" (ngSubmit)="onSubmit()">
      <div *ngIf="step == 1" formGroupName="menuNameForm">
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-group">
              <label for="menuName" class="form-label">Name</label>
              <input type="text" class="form-control" formControlName="menuName" id="menuName" aria-describedby="name">
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="step == 2" formGroupName="ingredientsForm">
        <div class="row">
          <div class="col-6 col-md-3">
            <button type="button" class="btn btn-primary" (click)="onAddIngredient()">Add ingredient</button>
          </div>
          <br>
        </div>
        <div class="col-12 col-md-6" formArrayName="ingredients">
          <div class="row" *ngFor="let ingredientCtrl of ingredients.controls; let i = index"
               [formGroupName]="i">
            <div class="col-12 col-md-4">
              <div class="form-group">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" formControlName="name" id="name">
              </div>
            </div>
            <div class="col-12 col-md-4">
              <div class="form-group">
                <label for="amount" class="form-label">amount</label>
                <input type="text" class="form-control" formControlName="amount" id="amount">
              </div>
            </div>
            <div class="col-12 col-md-4">
              <div class="form-group">
                <label class="form-label"></label>
                <button class="btn btn-danger" (click)="onDeleteIngredient(i)">X</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="step == 3" formGroupName="instructionsForm">
        <div class="row">
          <div class="col-6 col-md-3">
            <button type="button" class="btn btn-primary" (click)="onAddInstruction()">Add instruction</button>
          </div>
          <br>
        </div>
        <div class="col-12 col-md-6" formArrayName="instructions">
          <div class="row" *ngFor="let instructionCtrl of instructions.controls; let i = index"
               [formGroupName]="i">
            <div class="col-12 col-md-4">
              <div class="form-group">
                <label for="instruction" class="form-label">Instruction</label>
                <input type="text" class="form-control" formControlName="instruction" id="instruction">
              </div>
            </div>
            <div class="col-12 col-md-4">
              <div class="form-group">
                <label class="form-label"></label>
                <button class="btn btn-danger" (click)="onDeleteInstruction(i)">X</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
      <a class="btn btn-primary mx-2" *ngIf="step != 1" (click)="previous()">Previous</a>
      <button type="submit" class="btn btn-primary mx-2" *ngIf="step != 3">Next</button>
      <button type="submit" class="btn btn-primary mx-2" *ngIf="step == 3">Submit</button>
      <br>
      <br>
      <pre>step = {{step}} form =  {{menuMultiStepForm.value | json}}</pre>
    </form>
  </div>
</div>
